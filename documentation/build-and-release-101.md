# Build
The `alfresco-file-transfer-receiver` project uses _Travis CI_. \
The `.travis.yml` config file can be found in the root of the repository.


## Stages and Jobs
1. **Tests**: Java Build with Unit Tests, ADFS tests, PingFederate tests.
2. **Release**: Release and Deployment by publishing to Nexus.

## Branches
Travis CI builds differ by branch:
* `master` / `support/*` / `release/*` branches:
  - regular builds which include the _Tests_ stage (unless the commit message contains the
   `[skip tests]` tag);
  - if the commit message contains the `[release]` tag, the builds will also 
  include the _Release_ job;
All other branches get ignored.


## Release process steps & info
Prerequisites:
 - the `master` / `support/*` / `release/*` branch is green and it contains all the changes that should be 
 included in the next release.

Steps:
1. Update the project version if the current POM version is not the next desired release; use a
maven command, i.e.
    ```bash
    mvn versions:set -DnewVersion=#.##.#-SNAPSHOT versions:commit
    ```
2. Update the project's dependencies (remove the `-SNAPSHOT` suffixes - only for dependencies, not
 for the local project version).
3. Create a new commit with the `[release]` tag in its message. If no local changes have 
been generated by steps (1) and (2), then an empty commit should be created - e.g.
    ```bash
    git commit --allow-empty -m "ACS-###: Release Alfresco Trashcan Cleaner Module #.##.# [release]"
    ```
    > The location of the `[release]` tag in the commit message is irrelevant.
4. Push your local commit to **origin**.
